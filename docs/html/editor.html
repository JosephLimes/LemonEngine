<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Lemon: Using the Editor</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Lemon
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('editor.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Using the Editor</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This page details the use of the included level editor in the engine.</p>
<h3>Preparing Objects for use in the Editor </h3>
<p>Any object you wish to use in the editor must derive from <a class="el" href="class_level_object.html" title="A GameObject that can be used in the editor.">LevelObject</a>. You must of course implement the pure virtual functions LevelInitialize() and LevelTerminate(). You can treat these as a constructor and destructor respectively. In particular, make sure to register and deregister for services here instead of your constructor and destructor to avoid unwanted errors. In addition, you must invoke the macro DEF_FUNC_LVL_ID in a <b>public</b> section of your header to ensure the engine can properly identify your object type when saving and loading from file. It's also worth noting that <a class="el" href="class_level_object.html" title="A GameObject that can be used in the editor.">LevelObject</a> derives from <a class="el" href="class_game_object.html" title="A game object. These are objects that recieve the majority of services that the engine provides.">GameObject</a>, so it is not necessary to also derive from <a class="el" href="class_game_object.html" title="A game object. These are objects that recieve the majority of services that the engine provides.">GameObject</a> to obtain its services. Below is an example header for a <a class="el" href="class_level_object.html" title="A GameObject that can be used in the editor.">LevelObject</a>.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#ifndef _ExampleCube</span></div>
<div class="line"><span class="preprocessor">#define _ExampleCube</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;Tools/Editor/LevelObject.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>ExampleCube : <span class="keyword">public</span> <a class="code hl_class" href="class_level_object.html">LevelObject</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    ExampleCube() = <span class="keywordflow">default</span>;</div>
<div class="line">    ~ExampleCube();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// make sure this macro is in a public section of your header</span></div>
<div class="line">    DEF_FUNC_LVL_ID</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="class_level_object.html#aefe86a182426a14b083d21786c27738d">LevelInitialize</a>() <span class="keyword">override</span>;</div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="class_level_object.html#a9c7dbc4b873ae7e4883cd6fd11d3ab29">LevelTerminate</a>() <span class="keyword">override</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="class_updatable.html#acf3e0052461248a862ea752ae9dc8185">Update</a>() <span class="keyword">override</span>;</div>
<div class="line">    <span class="keywordtype">void</span> Draw() <span class="keyword">override</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="class_game_object.html#a23f5fcb3d33808c17cce6d2b8961cf46">SceneExit</a>() <span class="keyword">override</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    GraphicsObject_WireframeConstantColor* pCube;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#endif _ExampleCube</span></div>
<div class="ttc" id="aclass_game_object_html_a23f5fcb3d33808c17cce6d2b8961cf46"><div class="ttname"><a href="class_game_object.html#a23f5fcb3d33808c17cce6d2b8961cf46">GameObject::SceneExit</a></div><div class="ttdeci">virtual void SceneExit()</div><div class="ttdoc">To be called when the exit submission is processed.</div><div class="ttdef"><b>Definition</b> GameObject.h:38</div></div>
<div class="ttc" id="aclass_level_object_html"><div class="ttname"><a href="class_level_object.html">LevelObject</a></div><div class="ttdoc">A GameObject that can be used in the editor.</div><div class="ttdef"><b>Definition</b> LevelObject.h:22</div></div>
<div class="ttc" id="aclass_level_object_html_a9c7dbc4b873ae7e4883cd6fd11d3ab29"><div class="ttname"><a href="class_level_object.html#a9c7dbc4b873ae7e4883cd6fd11d3ab29">LevelObject::LevelTerminate</a></div><div class="ttdeci">virtual void LevelTerminate()=0</div><div class="ttdoc">Called on level end. You can treat this similar to a destructor.</div></div>
<div class="ttc" id="aclass_level_object_html_aefe86a182426a14b083d21786c27738d"><div class="ttname"><a href="class_level_object.html#aefe86a182426a14b083d21786c27738d">LevelObject::LevelInitialize</a></div><div class="ttdeci">virtual void LevelInitialize()=0</div><div class="ttdoc">Called on level start. You can treat this similar to a constructor.</div></div>
<div class="ttc" id="aclass_updatable_html_acf3e0052461248a862ea752ae9dc8185"><div class="ttname"><a href="class_updatable.html#acf3e0052461248a862ea752ae9dc8185">Updatable::Update</a></div><div class="ttdeci">virtual void Update()</div><div class="ttdoc">Updates this object.</div><div class="ttdef"><b>Definition</b> Updatable.h:34</div></div>
</div><!-- fragment --><p>An important point to understand is that when updating your view in the editor, the editor relies on your object updating its location in its Update() function, using the Matrix m_world that is inherited from the <a class="el" href="class_level_object.html" title="A GameObject that can be used in the editor.">LevelObject</a> class. This is the Matrix that the editor will update, so if these changes aren't reflected in your Update() function they will not be reflected in the editor.</p>
<p>Likewise, collision data will also need to be computed for the object to be selectable by clicking. The object does <em>not</em> need to be registered for collisions, however.</p>
<p>Something else to consider is that if you don't want your object to render in game, but you do want it to render in the editor, simply use the DrawEditor2D() and DrawEditor3D() functions instead of the standard Draw2D() and Draw3D(). This could be useful for objects such as light sources, pathfinding nodes, etc.</p>
<p>Below is a sample implementation file of our ExampleCube.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;ExampleCube.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;Tools\Colors.h&quot;</span></div>
<div class="line"> </div>
<div class="line">ExampleCube::~ExampleCube()</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">delete</span> pCube;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> ExampleCube::LevelInitialize()</div>
<div class="line">{</div>
<div class="line">    pCube = <span class="keyword">new</span> GraphicsObject_WireframeConstantColor(</div>
<div class="line">        <a class="code hl_function" href="class_model_manager.html#a0abf54d86ea3a78b454fc3507256c71a">ModelManager::Get</a>(<span class="stringliteral">&quot;LEMON_DEFAULT_CUBE&quot;</span>),</div>
<div class="line">        <a class="code hl_function" href="class_shader_manager.html#aa58c8b0613ef122277ffcebf3c065fcc">ShaderManager::Get</a>(<span class="stringliteral">&quot;LEMON_DEFAULT_COLOR_CONSTANT&quot;</span>),</div>
<div class="line">        Colors::Blue</div>
<div class="line">    );</div>
<div class="line"> </div>
<div class="line">    pCube-&gt;SetWorld(m_world);</div>
<div class="line"> </div>
<div class="line">    SetCollidableGroup&lt;ExampleCube&gt;();</div>
<div class="line">    SetCollisionModel(pCube-&gt;getModel(), OBB);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="class_drawable.html#a49f6dacbabeef8c0b18cfbfe64ffe4fc">Drawable::SubmitRegistration</a>();</div>
<div class="line">    <a class="code hl_function" href="class_updatable.html#a9b5b21001c4deba1b36015ee97fbe012">Updatable::SubmitRegistration</a>();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> ExampleCube::LevelTerminate()</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="class_drawable.html#ab288b1dd0b4537169e3f318dbf0f31c5">Drawable::SubmitDeregistration</a>();</div>
<div class="line">    <a class="code hl_function" href="class_updatable.html#aa21b8820f5b27f79ebd1a36886130989">Updatable::SubmitDeregistration</a>();</div>
<div class="line"> </div>
<div class="line">    SubmitExit();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> ExampleCube::Update()</div>
<div class="line">{</div>
<div class="line">    pCube-&gt;SetWorld(m_world);</div>
<div class="line">    UpdateCollisionData(m_world);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> ExampleCube::Draw3D()</div>
<div class="line">{</div>
<div class="line">    pCube-&gt;Render(<a class="code hl_function" href="class_scene_manager.html#a9c059aa8eeb8997611c2cc06d1ad0ecb">SceneManager::GetActiveCamera</a>());</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> ExampleCube::SceneExit()</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">delete</span> <span class="keyword">this</span>;</div>
<div class="line">}</div>
<div class="ttc" id="aclass_drawable_html_a49f6dacbabeef8c0b18cfbfe64ffe4fc"><div class="ttname"><a href="class_drawable.html#a49f6dacbabeef8c0b18cfbfe64ffe4fc">Drawable::SubmitRegistration</a></div><div class="ttdeci">void SubmitRegistration()</div><div class="ttdoc">Submit a request to the scene to recieve draw calls.</div><div class="ttdef"><b>Definition</b> Drawable.cpp:19</div></div>
<div class="ttc" id="aclass_drawable_html_ab288b1dd0b4537169e3f318dbf0f31c5"><div class="ttname"><a href="class_drawable.html#ab288b1dd0b4537169e3f318dbf0f31c5">Drawable::SubmitDeregistration</a></div><div class="ttdeci">void SubmitDeregistration()</div><div class="ttdoc">Submit a request to the scene to deregister for draw calls.</div><div class="ttdef"><b>Definition</b> Drawable.cpp:28</div></div>
<div class="ttc" id="aclass_model_manager_html_a0abf54d86ea3a78b454fc3507256c71a"><div class="ttname"><a href="class_model_manager.html#a0abf54d86ea3a78b454fc3507256c71a">ModelManager::Get</a></div><div class="ttdeci">static Model * Get(std::string id)</div><div class="ttdoc">Retrives the Model associated with the given identifier.</div><div class="ttdef"><b>Definition</b> ModelManager.h:29</div></div>
<div class="ttc" id="aclass_scene_manager_html_a9c059aa8eeb8997611c2cc06d1ad0ecb"><div class="ttname"><a href="class_scene_manager.html#a9c059aa8eeb8997611c2cc06d1ad0ecb">SceneManager::GetActiveCamera</a></div><div class="ttdeci">static Camera * GetActiveCamera()</div><div class="ttdoc">Gets current camera from the active scene.</div><div class="ttdef"><b>Definition</b> SceneManager.h:35</div></div>
<div class="ttc" id="aclass_shader_manager_html_aa58c8b0613ef122277ffcebf3c065fcc"><div class="ttname"><a href="class_shader_manager.html#aa58c8b0613ef122277ffcebf3c065fcc">ShaderManager::Get</a></div><div class="ttdeci">static ShaderObject * Get(std::string id)</div><div class="ttdoc">Retrives the Shader associated with the given identifier.</div><div class="ttdef"><b>Definition</b> ShaderManager.h:25</div></div>
<div class="ttc" id="aclass_updatable_html_a9b5b21001c4deba1b36015ee97fbe012"><div class="ttname"><a href="class_updatable.html#a9b5b21001c4deba1b36015ee97fbe012">Updatable::SubmitRegistration</a></div><div class="ttdeci">void SubmitRegistration()</div><div class="ttdoc">Submit a request to the scene to recieve update calls.</div><div class="ttdef"><b>Definition</b> Updatable.cpp:19</div></div>
<div class="ttc" id="aclass_updatable_html_aa21b8820f5b27f79ebd1a36886130989"><div class="ttname"><a href="class_updatable.html#aa21b8820f5b27f79ebd1a36886130989">Updatable::SubmitDeregistration</a></div><div class="ttdeci">void SubmitDeregistration()</div><div class="ttdoc">Submit a request to the scene to deregister for update calls.</div><div class="ttdef"><b>Definition</b> Updatable.cpp:28</div></div>
</div><!-- fragment --><p>With this, our object is ready to be used in the editor. The last step is to formally register it in LoadAllResources(), as shown below. We'll also start the editor by designating it as the start scene.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="class_lemon.html#ac4b48af59084fec2f590769352588e0d">Lemon::LoadAllResources</a>()</div>
<div class="line">{</div>
<div class="line">    LevelObjectManager::RegisterType&lt;ExampleCube&gt;();</div>
<div class="line">    <a class="code hl_function" href="class_scene_manager.html#aace45f7d6b9def5f9e59f84b7107cc12">SceneManager::SetNextScene</a>(<span class="keyword">new</span> <a class="code hl_class" href="class_editor_scene.html">EditorScene</a>());</div>
<div class="line">}</div>
<div class="ttc" id="aclass_editor_scene_html"><div class="ttname"><a href="class_editor_scene.html">EditorScene</a></div><div class="ttdef"><b>Definition</b> EditorScene.h:10</div></div>
<div class="ttc" id="aclass_lemon_html_ac4b48af59084fec2f590769352588e0d"><div class="ttname"><a href="class_lemon.html#ac4b48af59084fec2f590769352588e0d">Lemon::LoadAllResources</a></div><div class="ttdeci">void LoadAllResources()</div><div class="ttdoc">Loads all assets prior to starting the game.</div><div class="ttdef"><b>Definition</b> LoadAllResources.cpp:32</div></div>
<div class="ttc" id="aclass_scene_manager_html_aace45f7d6b9def5f9e59f84b7107cc12"><div class="ttname"><a href="class_scene_manager.html#aace45f7d6b9def5f9e59f84b7107cc12">SceneManager::SetNextScene</a></div><div class="ttdeci">static void SetNextScene(Scene *pScene)</div><div class="ttdoc">Sets the next scene.</div><div class="ttdef"><b>Definition</b> SceneManager.h:33</div></div>
</div><!-- fragment --><h3>Using the Editor </h3>
<p>Once in the editor, we will see our ExampleCube in the list of selectable objects on the left side of the screen. Using space, we can place it wherever our green marker is. We can toggle <a class="el" href="class_game_object.html" title="A game object. These are objects that recieve the majority of services that the engine provides.">GameObject</a> properties to be automatically set upon level initialization via the z, x, and c keys. It's worth noting that you can still manually register for these in your LevelInitialize() function, but this could be useful for when you have multiple of the same object and don't want all of them to be collidable, for example.</p>
<p>Press enter to begin typing a filename for the level you are working on, and enter again to confirm. By pressing f1, your map will be saved to the Maps directory. Once you have a level you're happy with, you simply need to call LevelInitialize(&lt;mapname&gt;) in the Initialize() function of the <a class="el" href="class_scene.html" title="A scene manages GameObjects and their services.">Scene</a> you wish to use it in, demonstrated below.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> ExampleScene::Initialize()</div>
<div class="line">{</div>
<div class="line">    LevelInitialize(<span class="stringliteral">&quot;EXAMPLE_MAP&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
